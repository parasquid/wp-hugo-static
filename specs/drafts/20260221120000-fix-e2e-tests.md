# Draft: Fix E2E Tests - Single Command Execution

## Problem
- E2E tests try to start containers from inside builder container
- Builder has no docker access â†’ tests fail
- Need: single command to run e2e tests with proper isolation

## Solution
Start containers first, then run e2e. Script handles sequence:

1. Start test containers (`docker compose -p test-e2e -f docker-compose.test.yml up -d`)
2. Wait for WordPress readiness (~90s)
3. Run e2e tests inside builder
4. Clean up containers on exit

## Changes Needed

### 1. Update run-e2e-tests.sh
- Add container start before tests
- Add cleanup trap after tests
- Wait for WordPress health

### 2. Update docker_helper.rb
- Remove container lifecycle management from spec
- OR add check: if containers running, skip start/stop

### 3. Verify works
- Run full workflow

## Open Questions
- How long to wait for WordPress? (90s seems safe)
- Should we verify containers are running before tests?
